@if (authorize && evenement != undefined) {

  
<div class="row marge">
  <div class="col-sm-12">

<mat-card appearance="raised">
  <mat-grid-list cols="3" rowHeight="50px">
    <mat-grid-tile [colspan]="2">

      <button class="full-width" mat-flat-button type="button" (click)="update()">Enregistrer les modifications</button>

    </mat-grid-tile>
    <mat-grid-tile>

      <button class="full-width" mat-flat-button type="button"
        [routerLink]="['/',evenement.id,'gestion']">Retour</button>

    </mat-grid-tile>
  </mat-grid-list>
</mat-card>


</div>


<div class="col-md-4">



    <mat-card appearance="raised">
      <form [formGroup]="formulaireEvent">
        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Nom de l'évènement</mat-label>
            <input type="text" matInput formControlName="eventName">

            @if (formulaireEvent.get('eventName')?.hasError('required')) {
            <mat-error>Le nom de l'évènement est obligatoire</mat-error>
            }

          </mat-form-field>
        </mat-card-content>

        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Mot de passe d'accès à la configuration</mat-label>
            <input type="password" matInput formControlName="password">

            @if (formulaireEvent.get('password')?.hasError('required')) {
            <mat-error>Le mot de passe est obligatoire</mat-error>
            }

          </mat-form-field>
        </mat-card-content>



        <mat-card-content>

          <mat-form-field>
            <mat-label>Vidange de la base donnée des bénévoles</mat-label>
            <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="dp" formControlName="endDate">

            <mat-datepicker-toggle matIconSuffix [for]="dp"></mat-datepicker-toggle>
            <mat-datepicker #dp></mat-datepicker>
            @if (formulaireEvent.get('endDate')?.hasError('min')) {
            <mat-error>La date minimale est {{minDate}}</mat-error>
            }

          </mat-form-field>

        </mat-card-content>

        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Nom complet du contact</mat-label>
            <input type="text" matInput formControlName="contact">

            @if (formulaireEvent.get('contact')?.hasError('required')) {
            <mat-error>Le nom du contact est obligatoire</mat-error>
            }

          </mat-form-field>
        </mat-card-content>

        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Numéro de tel du téléphone</mat-label>
            <input type="text" matInput formControlName="contactTel">

            @if (formulaireEvent.get('contactTel')?.hasError('required')) {
            <mat-error>Le nom du contactTel est obligatoire</mat-error>
            }

          </mat-form-field>
        </mat-card-content>

        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Nom complet du contactEmail</mat-label>
            <input type="email" matInput formControlName="contactEmail">

            @if (formulaireEvent.get('contactEmail')?.hasError('required')) {
            <mat-error>Le nom du contactTel est obligatoire</mat-error>
            }

          </mat-form-field>
        </mat-card-content>

        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Nom complet du sitepersourl</mat-label>
            <input type="text" matInput formControlName="sitepersourl">

            @if (formulaireEvent.get('sitepersourl')?.hasError('required')) {
            <mat-error>Le nom du contactTel est obligatoire</mat-error>
            }

          </mat-form-field>
        </mat-card-content>


        <mat-card-content>
          <mat-slide-toggle formControlName="needtel">
            Besoin du téléphone des bénévoles?
          </mat-slide-toggle>

        </mat-card-content>
      </form>

    </mat-card>

  </div>


  <div class="col-md-4">

    <mat-card appearance="raised">
      <form [formGroup]="formulaireEvent">
        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Contenu de l'email de validation</mat-label>
            <textarea matInput rows="5" formControlName="validation"></textarea>

            @if (formulaireEvent.get('validation')?.hasError('required')) {
            <mat-error>Le contenu de l'email de validation est obligatoire</mat-error>
            }

          </mat-form-field>
        </mat-card-content>

        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Signature automatique des emails de l'application</mat-label>
            <textarea matInput rows="5" formControlName="signature"></textarea>

            @if (formulaireEvent.get('signature')?.hasError('required')) {
            <mat-error>La signature est obligatoire</mat-error>
            }

          </mat-form-field>
        </mat-card-content>


        <mat-card-content>
          <mat-slide-toggle formControlName="afficherMessage">
            Afficher le message d'accueil ci dessous?
          </mat-slide-toggle>

        </mat-card-content>

        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Message d'accueil</mat-label>
            <textarea matInput rows="5" formControlName="message"></textarea>


          </mat-form-field>
        </mat-card-content>


      </form>

    </mat-card>

  </div>


  <div class="col-md-4">

    <mat-card appearance="raised">
      <mat-card-content>

        @if (logo) {
        <img mat-card-image [src]="logo" alt="logo">
        }



        <button class="full-width" type="button" mat-stroked-button (click)="fileInput.click()">Modifier le
          logo</button>
        <input hidden (change)="fileChangeEvent($event)" #fileInput type="file" id="file" accept="image/*">
        @if (croppedImage.length > 5) {
        <button class="full-width mat-error" mat-stroked-button type="button" (click)="uploadImage()">Enregistrer cette
          image</button>
        }

        <image-cropper [imageChangedEvent]="imageChangedEvent" [output]="'base64'" [aspectRatio]="14/9"
          [resizeToWidth]="150" format="jpeg" (imageCropped)="imageCropped($event)" (imageLoaded)="imageLoaded()"
          (cropperReady)="cropperReady()" (loadImageFailed)="loadImageFailed()">
        </image-cropper>


      </mat-card-content>
    </mat-card>



  </div>
</div>

}